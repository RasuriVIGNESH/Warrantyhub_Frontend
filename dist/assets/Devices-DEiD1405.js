import{c as k,j as e,b as x,r as o,d as S,a as D,P as L}from"./index-DoWs054Z.js";import{u as E,C as f,L as R,S as T,T as A,R as I,W as P,A as q,D as F}from"./Card-C96b6n_e.js";import{B as h}from"./Button--7qJva9l.js";import{I as O}from"./Input-BsjUzpDb.js";import{L as $}from"./loader-2-B_Pw-CBw.js";import{P as v}from"./plus-DfGQvwyB.js";import"./useAuth-DxPVRwz5.js";/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=k("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function w({value:s,onChange:t,options:d,className:i=""}){return e.jsx("select",{value:s,onChange:l=>t(l.target.value),className:`block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white ${i}`,children:d.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}w.propTypes={value:x.string.isRequired,onChange:x.func.isRequired,options:x.arrayOf(x.shape({value:x.string.isRequired,label:x.string.isRequired})).isRequired,className:x.string};function B({trigger:s,items:t}){const[d,i]=o.useState(!1),l=o.useRef(null),n=o.useRef(null),[g,u]=o.useState({top:0,left:0});o.useEffect(()=>{function a(c){l.current&&!l.current.contains(c.target)&&!n.current.contains(c.target)&&i(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const y=()=>{if(!d){const a=n.current.getBoundingClientRect();u({top:a.bottom+window.scrollY,left:a.left+window.scrollX-100})}i(!d)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:n,onClick:y,children:s}),d&&S.createPortal(e.jsx("div",{ref:l,className:"absolute z-50 w-36 py-1 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",style:{top:`${g.top}px`,left:`${g.left}px`},children:t.map((a,c)=>e.jsx("button",{className:`block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 ${a.className||"text-gray-700 dark:text-gray-300"}`,onClick:()=>{a.onClick(),i(!1)},children:a.label},c))}),document.body)]})}const W=s=>{const t=(s.name+" "+s.model+" "+s.manufacturer).toLowerCase();return t.includes("macbook")||t.includes("laptop")||t.includes("notebook")?R:t.includes("iphone")||t.includes("phone")||t.includes("smartphone")||t.includes("mobile")?T:t.includes("tv")||t.includes("television")?A:t.includes("refrigerator")||t.includes("fridge")?I:t.includes("washing")||t.includes("washer")?P:t.includes("air")||t.includes("ac")?q:t.includes("water")||t.includes("purifier")?F:L},Y=[{value:"all",label:"Filter by status"},{value:"active",label:"Active"},{value:"expiring-soon",label:"Soon"},{value:"expired",label:"Expired"}];function J(){const s=D(),{devices:t,loading:d,error:i,deleteDevice:l}=E(),[n,g]=o.useState(""),[u,y]=o.useState("all"),[a,c]=o.useState(null),p=t.filter(r=>{var b,j;const m=r.name.toLowerCase().includes(n.toLowerCase())||((b=r.manufacturer)==null?void 0:b.toLowerCase().includes(n.toLowerCase()))||((j=r.model)==null?void 0:j.toLowerCase().includes(n.toLowerCase())),C=u==="all"||r.warrantyStatus===u;return m&&C}),N=async r=>{try{await l(r),c(null)}catch(m){console.error("Failed to delete device:",m)}};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary"})}):i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Error loading devices"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Your Devices"}),e.jsxs(h,{onClick:()=>s("/devices/new"),className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Add Device"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),e.jsx(O,{type:"text",value:n,onChange:g,placeholder:"Search devices...",className:"pl-12 w-full bg-gray-100 dark:bg-gray-800 border-0 h-12 text-base"})]})}),e.jsx(w,{value:u,onChange:y,options:Y,className:"w-44 bg-gray-100 dark:bg-gray-800 border-0 h-12 text-base px-4"})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(f,{className:"w-full max-w-md mx-4 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Delete Device"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(h,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:()=>N(a.id),children:"Delete"})]})]})})}),e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:n||u!=="all"?"Try adjusting your filters":"Get started by adding your first device"}),!n&&u==="all"&&e.jsxs(h,{className:"mt-4 bg-blue-500 hover:bg-blue-600",onClick:()=>s("/devices/new"),children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Add Your First Device"]})]})}):p.map(r=>{const m=W(r);return e.jsx(f,{className:"bg-white dark:bg-transparent hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors border dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1 cursor-pointer",onClick:()=>s(`/devices/${r.id}`),children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded-lg",children:e.jsx(m,{className:"w-8 h-8 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[r.manufacturer," - ",r.model]}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                          ${r.warrantyStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":r.warrantyStatus==="expiring-soon"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}`,children:r.warrantyStatus.replace("-"," ").charAt(0).toUpperCase()+r.warrantyStatus.slice(1).replace("-"," ")}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Expires: ",new Date(r.warrantyEndDate).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"relative",children:e.jsx(B,{trigger:e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(M,{className:"w-5 h-5 text-gray-500"})}),items:[{label:"Extend Warranty",onClick:()=>{console.log("Extend warranty for device:",r.id)}},{label:"Delete",onClick:()=>c(r),className:"text-red-600 dark:text-red-400"}]})})]})},r.id)})})]})}export{J as Devices};
